---
title: "SDS 192: Introduction to Data Science"
author: "Albert Y. Kim"
date: "Last updated on `r Sys.Date()`"
output:
  html_document:
    toc: true
    toc_depth: 2
    toc_float: true
    df_print: kable
---

<style>
h1{font-weight: 400;}
</style>

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = TRUE, message=FALSE, warning = FALSE, eval = TRUE, 
  fig.width = 16/2, fig.height = 9/2
)

# CRAN R packages:
library(tidyverse)
library(stringr)
library(knitr)
library(lubridate)
library(forcats)
library(fivethirtyeight)
library(nycflights13)
library(gapminder)
library(babynames)
library(scales)
library(moderndive)
library(leaflet)
library(maps)
library(mapproj)

# Install emo package from GitHub for emoji functionality:
# devtools::install_github("hadley/emo")
library(emo)

# Install patchwork package from GitHub for composing ggplots:
# devtools::install_github("thomasp85/patchwork")
library(patchwork)

# Set seed value of random number generator to get "replicable" random numbers.
# Why 76? Because of https://www.youtube.com/watch?v=xjJ7FheCkCU
set.seed(76)
```

<style>
h1{font-weight: 400;}
</style>

***

# Schedule 

**Topics**:

1. Data visualization (pink): Grammar of Graphics, Five Named Graphs (5NG), color theory.
1. Working with data (blue): data wrangling, importing, and formatting
1. Maps and spatial data (green): Maps and geospatial data.
1. Learning how to learn new data science tools (yellow): SQL, TBD.

Note that while topics and topics dates may change, all problem sets (PS), project, and midterm dates will not. 

<iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vRvggFhESyu_EFxrcFQXsZtdaQqaqcQ6kgWg173WTkTeWV67RWiZ01G8jhJsQ2b5VUVCJqQ8xo6COWM/pubhtml?gid=864197397&amp;single=true&amp;widget=true&amp;headers=false" width="100%" height="850"></iframe>

<!--
{target="_blank"}
-->



***




# Lec 19: Wed 10/21 {#Lec19}

## Announcements

* Sit next to your MP2 partner for today's in-class exercise
* Are you interested in Majoring in SDS? Check out our presentation of the major tomorrow!

<center>
![](static/images/announcements/SDS_major.png){ width=750px }
</center>
<br>

## Today's topics/activities

### 1. Chalk talk

Recap of Lec18: Click on tweet below to see all 6 different types of joins:

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">I created a cheat sheet of <a href="https://twitter.com/hashtag/dplyr?src=hash&amp;ref_src=twsrc%5Etfw">#dplyr</a>&#39;s join functions, inspired by this: <a href="http://t.co/40wMQDP0J4">http://t.co/40wMQDP0J4</a> <a href="https://twitter.com/hashtag/rstats?src=hash&amp;ref_src=twsrc%5Etfw">#rstats</a> <a href="http://t.co/P4XOLs5ov3">pic.twitter.com/P4XOLs5ov3</a></p>&mdash; Hiroaki Yutani (@yutannihilation) <a href="https://twitter.com/yutannihilation/status/551572539697143808?ref_src=twsrc%5Etfw">January 4, 2015</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

Copy this to your `classnotes.Rmd`

<script src="https://gist.github.com/rudeboybert/968dbf26d5f9407703ae7b24d217af67.js"></script>


### 2. In-class exercise



***



# Lec 18: Mon 10/21 {#Lec18}

## Announcements

* MP2 rubric posted
* Posting in `#maps` channel on Slack
* For Wednesday's lecture sit next to your MP2 partner. We'll be doing an in-class data-wrangling exercise


## Today's topics/activities

### 1. Chalk talk

* Go over [PS04 solutions](PS.html#PS04_solutions)
* Recap of Lec17: How to `arrange()` by more than one variable
* Last major set of verbs: `_join()` data frames, `select()`, and `rename()` variables

### 2. In-class exercise

* Go over ModernDive 3.7, 3.8.1 - 3.8.2.



***



# Lec 17: Fri 10/18 {#Lec17}

## Announcements

* PS05 posted: Due in one week.
* [Mini-Project 2](projects.html#MP2) posted: Due in two weeks.
* SDS talk on Monday at 5pm by Yeshimabeith Milner, founder of [Data for Black Lives](http://d4bl.org/){target="_blank"}. Shout out to Smithie [Lane√© Jung](https://twitter.com/laneejung){target="_blank"} for her important role in making this happen.

<center>
![](static/images/announcements/Milner_wide.png){ width=750px }
</center>
<br>


## Today's topics/activities

### 1. Chalk talk

* Recap of Lec16:
    + Go over diagram of `group_by() %>% summarize()`
    + Difference between `sum()` and `n()` summary functions.
* `mutate()` new columns/variables and `arrange()` i.e. sort rows

### 2. In-class exercise

* Go over ModernDive 3.5 - 3.6



***



# Lec 16: Wed 10/16 {#Lec16}

## Announcements

* Slack: Post on `#random` 

## Today's topics/activities

### 1. Chalk talk

* Recap of Lec14
* `summarize()` rows and `group_by() %>% summarize()`

### 2. In-class exercise

* Keyboard shortcut in RStudio
* Go over ModernDive 3.3 - 3.4



***



# Lec 15: Fri 10/11 {#Lec15}

## Announcements

* PS04 posted
* MP1: Due at 5pm on Friday.
    1. Files on Moodle
    1. Peer evaluation Google Form
    1. Group leader only: PDF of reflection piece on Moodle


## Today's topics/activities

### 1. In-class exercise

* Put finishing touches on MP1
* Do readings from Lec14 on Wed 10/9: ModernDive 3 - 3.2
* Start PS04 after you've done ModernDive readings


***



# Lec 14: Wed 10/9 {#Lec14}

## Announcements

*


## Today's topics/activities

### 1. Chalk talk

* Intro to data wrangling
* Pipe operator `%>%`
* `filter()` rows that meet a certain criteria

Example:

<script src="https://gist.github.com/rudeboybert/ebf39a24a03216be55cb20d9c475f57d.js"></script>



### 2. In-class exercise

* Go over ModernDive 3 - 3.2



***



# Lec 13: Mon 10/7 {#Lec13}

## Announcements

* No talking about midterm until Wednesday's lecture please.
* Sit next to your MP1 partner for today's lecture.
* If you're curious about my experiences in grad school, working at Google, switching to academia, and advice for aspiring data scientists, check out my appearance on episode #43 of the DataBytes podcast "To Google and Back." Also available on [Apple Podcasts](https://podcasts.apple.com/us/podcast/43-to-google-and-back/id1445241846?i=1000452290536){target="_blank"} and [Google Play](https://play.google.com/music/listen?u=0#/ps/Itfclix7dvr5c2kbtovrtufki2a){target="_blank"}.

<center>
<iframe src="https://open.spotify.com/embed-podcast/episode/4SEcmLwHdJfmXaQEY7NZlV" width="70%" height="232" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
</center>
<br>

## Today's topics/activities

### 1. Chalk talk

* Recap of Lec09:
    + `span` argument from `geom_smooth()`
    + What is `se = FALSE` mean
* What is a "minimally viable product"?


### 2. In-class exercise

* Work on MP1



***



# Lec 12: Fri 10/4 {#Lec12}

## Announcements

* Part of class-time on Monday to work on MP1
* Go over updated [Midterm I](midterms.html) instructions

## Today's topics/activities

### 1. Chalk talk

* Trend lines. Two types (among many):
    + Linear regression
    + LOESS smoother:  
    ![](static/images/loess.gif)
* Let's make a Shiny interactive visualization! If this is your first shiny app, you will need to install some packages: say "yes" to any prompts.
    1. Go to RStudio menu bar -> File -> New File... -> Shiny -> Give it title "LOESS smoother"
    1. Let's keep things simple and delete everything after line 38
    1. Save it as `loess.Rmd`
    1. Click "Run Document"
    1. See all possible input methods by looking at cheatsheet. Go to RStudio menu bar -> Help -> Cheatsheets -> Web Applications with Shiny -> Look at right-side of first page.


### 2. In-class exercise

First, copy this to your `classnotes.Rmd` and go over code.

```{r, eval=FALSE}
library(ggplot2)
library(dplyr)
library(gapminder)

# 1. Recreate plot from PS02 but with no color:
gapminder_2007 <- gapminder %>% 
  filter(year == 2007)

# 1.a) Add LOESS smoother layer with geom_smooth()
ggplot(data = gapminder_2007, mapping = aes(x = gdpPercap, y = lifeExp, size = pop)) +
  geom_point() +
  geom_smooth()

# 1.b) Remove standard error bars
ggplot(data = gapminder_2007, mapping = aes(x = gdpPercap, y = lifeExp, size = pop)) +
  geom_point() +
  geom_smooth(se = FALSE)

# 1.c) Change span of "smoothing" window by changing span = value. Try different values.
ggplot(data = gapminder_2007, mapping = aes(x = gdpPercap, y = lifeExp, size = pop)) +
  geom_point() +
  geom_smooth(se = FALSE, span = 0.25)

# 1.d) Force line to be straight. i.e. linear regression
ggplot(data = gapminder_2007, mapping = aes(x = gdpPercap, y = lifeExp, size = pop)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE)
```

Second, in `loess.Rmd` you're change only the code within the code

```
renderPlot({ 
    
    
})
```

to make an interactive version of plot 1.c) above.



***



# Lec 11: Wed 10/2 {#Lec11}

## Announcements

* None


## Today's topics/activities

### 1. Chalk talk

* Go over Midterm I




***



# Lec 10: Mon 9/30 {#Lec10}

## Announcements

* [Midterm I](midterms.html#midtermI) info posted
* [Mini-Project 1](projects.html#MP1) info posted


## Today's topics/activities

### 1. Chalk talk

* Recap of Lec09: Color palettes from [colorbrewer2.org](http://colorbrewer2.org/){target="_blank"}
<!--
+ You can also download color palettes in R packages, like the [`viridis` package](https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html){target="_blank"}
-->
* Student question: What is a `tibble`?
* Recap of "five named graphs": ModernDive Table 2.4
 

### 2. In-class exercise

* Go over ModernDive 2.9. In particular in Section 2.9.3, open the `ggplot2` cheatsheet in RStudio and read over the different `geom` types
* Changing default `color` and `fill` color aesthetics: 
    1. Copy and paste the code below into your `classnotes.Rmd` file
    1. Change both the color of the scatterplot points and the fill of the bars. You can do this by selecting a palette from [colorbrewer2.org](http://colorbrewer2.org/){target="_blank"} or by setting them manually

```{r, eval=FALSE}
library(ggplot2)
library(dplyr)
library(nycflights13)
library(gapminder)

# 1. Recreate plot from PS02, but change default "color" palette of points:
gapminder_2007 <- gapminder %>% 
  filter(year == 2007)
ggplot(data = gapminder_2007, 
       mapping = aes(x = gdpPercap, y = lifeExp, size = pop, color = continent)) +
  geom_point() +
  scale_color_brewer(palette = "Set1")

# 2.a) Recreate Figure 2.26 but change default "fill" color of bars by adding a 
# palette layer:
ggplot(data = flights, mapping = aes(x = carrier, fill = origin)) +
  geom_bar(position = position_dodge(preserve = "single")) +
  scale_fill_brewer(palette = "Set1")

# 2.b) Recreate Figure 2.26 but change default "fill" color of bars by manually 
# changing colors in a layer:
ggplot(data = flights, mapping = aes(x = carrier, fill = origin)) +
  geom_bar(position = position_dodge(preserve = "single")) +
  scale_fill_manual(values = c("darkorange", "forestgreen", "navyblue"))

# 2.c) Soooooo many choices...
colors()
```



***



# Lec 09: Fri 9/27 {#Lec09}

## Announcements

* Slack:
    + How to subscribe to a `#channel`
    + Using threads to keep conversations organized
* Go over [PS03 solutions](PS.html#PS03_solutions)

## Today's topics/activities

### 1. Chalk talk

* Recap of barplots: Exercise on pie charts vs barplots below
* Color theory
    1. `color` vs `fill` aesthetics in `ggplot2`
    1. Selecting a color palette from [colorbrewer2.org](http://colorbrewer2.org/){target="_blank"}
    1. How does `ggplot2` pick default colors? Using a [color wheel](https://stackoverflow.com/questions/21490210/how-to-plot-a-colour-wheel-by-using-ggplot){target="_blank"}
    1. Get the [color hex codes](https://www.color-hex.com/color/f8766d){target="_blank"} of `ggplot2` default color palette:
    
```{r}
library(scales)
number_of_colors <- 3
show_col(hue_pal()(number_of_colors))
```

    
### 2. Exercise on pie charts vs barplots

Say the following piecharts represent results of an election poll at time points: A = September, B = October, and C = November. At each time point we present the proportion of the poll respondents who say they will support one of 5 candidates: 1 through 5. 

![](static/images/piecharts.png){ width=600px }

Based on these 3 piecharts, answer the following questions:

1. At time point A, is candidate 5 doing better than candidate 4?
1. Did candidate 3 do better at time point B or time point C?
1. Who gained more support between time point A and time point B, candidate 2 or candidate 4?


Compare that to using barplots. Which do you prefer?

![](static/images/barplots.png){ width=600px }




### 3. In-class exercise

* Quiz on podcast
* First phase of Mini-Project 1 roll-out



***



# Lec 08: Mon 9/23 {#Lec08}

## Announcements

* No office hours on Wednesday
* In Lec07 below, added image of chalk talk data and boxplot.
* Problem sets: PS01 handed back

## Tweet of the Day

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">We are thrilled to be at <a href="https://twitter.com/Statfest?ref_src=twsrc%5Etfw">@Statfest</a> &amp; engaging with a dedicated community of statisticians! <br><br>We even managed to snag a photo with <a href="https://twitter.com/smithcollege?ref_src=twsrc%5Etfw">@smithcollege</a> alum Portia Exum of <a href="https://twitter.com/SASanalytics?ref_src=twsrc%5Etfw">@SASanalytics</a> before her panel. <a href="https://twitter.com/hashtag/smithieslead?src=hash&amp;ref_src=twsrc%5Etfw">#smithieslead</a> <a href="https://t.co/wloPa7Ybyd">pic.twitter.com/wloPa7Ybyd</a></p>&mdash; Smith College SDS (@SmithCollegeSDS) <a href="https://twitter.com/SmithCollegeSDS/status/1175474705605771269?ref_src=twsrc%5Etfw">September 21, 2019</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

## Today's topics/activities

### 1. Chalk talk

* Recap of boxplots
* Summary statistics that are robust to outliers: median and IQR
* Barplots


### 2. In-class exercise

* Go over ModernDive 2.8



***



# Lec 07: Fri 9/20 {#Lec07}

## Announcements

* Slack:
    + Prof. Katie Kinnaird's TRIPODS+X - Data Science Education Investigation
    + Post on `#random` by Ray
* Problem sets:
    + PS01 handed back on Monday
    + Go over [PS02 solutions](PS.html#PS02_solutions)
    + PS03 posted
* Announcement from Smithies in SDS:

![](static/images/announcements/SSDS.png){ width=450px }
<br>   





## Tweet of the Day

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">I üòçüòçüòç how boxplots make an appearance in Season 4 of <a href="https://twitter.com/HBO?ref_src=twsrc%5Etfw">@HBO</a> The Wire<br><br>Context: A Johns Hopkins academic presents his research on at-risk youth at a Baltimore middle school <a href="https://twitter.com/hashtag/TheWire?src=hash&amp;ref_src=twsrc%5Etfw">#TheWire</a> <a href="https://t.co/ETC2jYew9v">pic.twitter.com/ETC2jYew9v</a></p>&mdash; Albert Y. Kim (@rudeboybert) <a href="https://twitter.com/rudeboybert/status/1174729578373423105?ref_src=twsrc%5Etfw">September 19, 2019</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>



## Today's topics/activities

### 1. Chalk talk

* Recap of histograms
* Facets to split a visualization by the values of another variable
* Boxplots! Powerful, but tricky!


```{r, eval=TRUE, echo=FALSE}
library(ggplot2)
library(dplyr)
example <- tibble(
  values = c(1, 3, 5, 6, 7, 8, 9, 12, 13, 14, 15, 30)
)
```

Say we want to study the distribution of the following `r nrow(example)` values which are pre-sorted: 

> `r example %>% pull(values)`

They have the following *summary statistics*. A summary statistic is a single numerical value *summarizing* many values. Examples include the immediately obvious mean AKA average and median. Other less immediately obvious examples include:

* Quartiles (1st, 2nd, and 3rd) that cut up the data into 4 parts, each containing roughly one quarter = 25% of the data
* Minimum & maximum
* Interquartile-range (IQR): the distance between the 3rd and 1st quartiles

Min. | 1st Quartile | Median = 2nd Quartile  | 3rd Quartile  |  Max. | IQR
---- | ------- | ------  |  ------- | --- | ---
`r min(example$values)`  |  `r quantile(example$values, probs=0.25, type = 2)` |  `r median(example$values)`  |  `r quantile(example$values, probs=0.75, type=2)`  | `r max(example$values)` | 8 = 13.5 - 5.5


Let's compare the points and the corresponding boxplot side-by-side with the values on the $y$-axis matching:

```{r, echo=FALSE, eval=TRUE}
plot1 <- ggplot(example, aes(x=factor(1), y=values)) +
  geom_point() +
  labs(title = "Points") +
  theme(
    axis.title.x = element_blank(),
    axis.text.x = element_blank(),
    axis.ticks.x = element_blank()
  )

plot2 <- ggplot(example, aes(x=factor(1), y=values)) +
  geom_boxplot() +
  labs(title = "Boxplot") +
  theme(
    axis.title.x = element_blank(),
    axis.text.x = element_blank(),
    axis.ticks.x = element_blank()
  )
plot1 + plot2
```


### 2. In-class exercise

* Go over ModernDive 2.6 - 2.7
* Start PS03

I don't mind what you do with your class time, but it is very important that you complete the reading before next lecture. Boxplots take practice.


***




# Lec 06: Wed 9/18 {#Lec06}

## Announcements

* Prof. Katie Kinnaird's TRIPODS+X - Data Science Education Investigation

## Today's topics/activities

### 1. Chalk talk

* Recap of previous lecture
* Live-demo of creating `classnotes.Rmd`, an R Markdown file of all in-class exercise code: Write and copy/paste/tweak code in `classnotes.Rmd` and not in console. That way you can save it!
* Histograms for visualizing distribution of a numerical variable.


### 2. In-class exercise

* Go over ModernDive 2.5



***



# Lec 05: Mon 9/16 {#Lec05}

## Announcements

* Slack message: Abandoning RStudio Cloud in favor of RStudio Desktop.
* The art of managing Slack notifications

## Today's topics/activities

### 1. Chalk talk

* Recap of previous lecture
* Overplotting and two approaches for addressing it
* Linegraphs

### 2. In-class exercise

* Go over ModernDive 2.3.2 - 2.4



***



# Lec 04: Fri 9/13 {#Lec04}

## Announcements

* Screencast from last lecture posted
* I'm currently investigating issue with RStudio Cloud being slow
* PS02 posted under [Problem Sets](PS.html)


## Today's topics/activities

### 1. Chalk talk

* Recap of previous lecture
* R Markdown for *reproducible research*

**Input**: An `.Rmd` file  | **Output**: An `.html` webpage
------------- | -------------
![](static/images/rmd_input.png){ width=800px } | ![](static/images/rmd_output.png){ width=800px }


### 2. In-class exercise

1. At a couple of steps in this process, you will be asked to install packages. Say yes to all of them!
1. **Fiddle with RStudio settings**:
    + Go to RStudio menu bar -> Tools -> Global Options... -> R Markdown
    + Uncheck box next to "Show output inline for all R Markdown Documents"
1. **Create new R Markdown `.Rmd` file**:
    + Go to RStudio menu bar -> File -> New File -> R Markdown 
    + Set "Title" to "My first R Markdown report" and "Author" as your name.
1. **"Knit" a report**:
    + Click on the disk icon and save this file as `testing` somewhere on your computer. This will create a file called `testing.Rmd`
    + Click the arrow next to "Knit" -> "Knit to HTML".
    + An HTML webpage should pop up. However, it may be blocked by your browser. If so, in your browser's URL bar on the right, click on "Always allow pop-ups".
1. **Publish this report on web**:
    + Click on blue "Publish" button on top right of the resulting **pop-up html**.
    + Select RPubs.
    + If you haven't previously, create an account on Rpubs.com. If you have previously, login.
    + Set "Title" to "My first R Markdown report" and "Slug" to "testing"
    + You should end up with a webpage that looks like this [one](http://rpubs.com/rudeboybert/testing){target="_blank"}. This is live on the web!
1. **Update your report on web**:
    + Make some trivial change to your `testing.Rmd` file.
    + "Re-knit" your report and make sure your trivial change is reflected.
    + The blue "Publish" button should now read "Republish"
    + Click "Update existing"
    + Your updates are now live on the web!
1. **Bonus**: Play around with different formatting tools in R Markdown to customize your report! Go to RStudio menu bar -> Help -> Markdown quick reference.


**Tips on R Markdown**:

1. Knit early, knit often! If you wait until only after you've added a ton of code to knit and something doesn't work, you'll have a hard time figuring out where the error is. If you make incremental changes and knit after every step, you'll better able to isolate where errors are.
1. If you get stuck, **go through these [6 R Markdown Fixes](https://docs.google.com/document/d/1P7IyZ4On9OlrCOhygFxjC7XhQqyw8OludwChz-uFd_o/){target="_blank"} first**, then seek assistance. These 6 fixes resolve 85% of issues in my experience.



***



# Lec 03: Wed 9/11 {#Lec03}

## Announcements

* Slack updates: custom emojis and vote in today's poll!



## Today's topics/activities

### 1. Chalk talk

* Recap of previous lecture
* Grammar of Graphics
* Screencast of "Doing ModernDive readings". In particular the idea of "Running R code in RStudio":

<iframe width="560" height="315" src="https://www.youtube.com/embed/79aPogjtGm4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</br>

### 2. In-class exercise

* Go over ModernDive 2 - 2.3.1.



***



# Lec 02: Mon 9/9 {#Lec02}

## Announcements

* [Syllabus](syllabus.html) finalized.
* Problem Set 01 due this Friday posted under [Problem Sets](PS.html).


## Today's topics/activities

### 1. Chalk talk

* Intro to Slack [slides](static/intro_to_slack.pdf){target="_blank"}
* What is difference between R and RStudio?
* What are R packages?


### 2. In-class exercise

* Set up RStudio Cloud:
    + Click [here](https://rstudio.cloud/spaces/28268/join?access_code=qLpXUY0xlUFnViI1SB0Q%2FWd%2BEBw9zzL%2BC%2B8xe65F){target="_blank"} to join the "SDS192" Workspace.
    + Click on "New Project"
    + Name it "Class Notes"
* Go over ModernDive reading in schedule above. 

*About readings in this course*:

* You are responsible for completing a lecture's readings before the next lecture. Ex: you are responsible to read all of ModernDive Chapter 1 before Wednesday.
* I teach lectures assuming you have not done the readings beforehand. However, if it suits your learning style better, please do read beforehand.
* While you don't need to turn in your learning check answers, I *highly* recommend you still do them. The solutions are in Appendix D of the book.
* If you have your headphones, you may listen to music during in-class reading time.



***



# Lec 01: Fri 9/6 {#Lec01}

## Announcements

Welcome!

## Today's topics/activities

* My story.
* What this class is about: Answering questions with data.
* Executive summary of syllabus; finalized syllabus will be published next week.
* Coding: it's normal to be `r emo::ji("scream")`


